<link rel="stylesheet" href="/css/board.css">

<section class="dialog flip">
  <h1>üèÜ openSUSE Kudos Scoreboard</h1>

  <form method="get" class="period-select">
    <label for="period">Period:</label>
    <select id="period" name="period" onchange="this.form.submit()">
      <option value="30days" <%= period === '30days' ? 'selected' : '' %>>Last 30 Days</option>
      <option value="all" <%= period === 'all' ? 'selected' : '' %>>All Time</option>
    </select>
  </form>

  <% if (period === '30days') { %>
    <p class="subtitle">
      Showing kudos activity from the last 30 days (since <%= cutoffDate.toLocaleDateString() %>)
    </p>
  <% } else { %>
    <p class="subtitle">Showing all-time kudos and achievements</p>
  <% } %>

  <table class="scoreboard-table retro">
    <thead>
      <tr>
        <th>#</th>
        <th>Player</th>
        <th>Achievements</th>
        <th>Kudos Given</th>
        <th>Kudos Received</th>
      </tr>
    </thead>
    <tbody>
      <% leaderboard.forEach((u, i) => { %>
        <tr>
          <td>
            <% if (i === 0) { %>ü•á<% } 
               else if (i === 1) { %>ü•à<% } 
               else if (i === 2) { %>ü•â<% } 
               else { %><%= i + 1 %><% } %>
          </td>
          <td>
            <a href="/user/<%= u.username %>">
              <% if (u.avatarUrl) { %>
                <img src="<%= u.avatarUrl %>" alt="<%= u.username %>" class="avatar-small"/>
              <% } %>
              <%= u.username %>
            </a>
          </td>
          <td><%= u.achievementsCount %></td>
          <td><%= u.kudosGiven %></td>
          <td><%= u.kudosReceived %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</section>
